# 网络环境现状
- [网络安全现状分析：网民遭遇网络安全问题的比例减少，网络安全治理卓有成效_观研报告网 (chinabaogao.com)](https://www.chinabaogao.com/market/202203/577401.html)
- [IDS 和 IPS 有什么区别 - 网安 (wangan.com)](https://www.wangan.com/wenda/1451)

网络虽带来诸多便利，其存在的问题亦不可忽视，尤其是网络安全问题。个人信息泄露、网络诈骗、账号密码被盗、设备中病毒或木马等网络安全隐患，给网络安全防护工作带来极大挑战。我国是名副其实的网络大国，而非网络强国，网络安全相关工作起步晚。网络安全不仅涉及网民安全，也关系到国家安全，没有网络安全就没有国家安全。
9月5日，国家计算机病毒应急处理中心发布了“关于西北工业大学遭受美国国家安全局网络攻击的调查报告”。这向公众详细揭开了美国对我们网络攻击全过程。这也是我首次看到，我们如此详细的披露美国对我们网络攻击的方式，所使用的具体网络攻击武器名称、包括直接披露了具体是美国哪个部门发动了怎样的网络攻击，甚至定位到发动攻击的人数有多少。

入侵检测系统（intrusion detection system，简称“IDS”）是一种对网络传输进行即时监视，在发现可疑传输时发出警报或者采取主动反应措施的网络安全设备。它与其他网络安全设备的不同之处便在于，IDS是一种积极主动的安全防护技术。
入侵防御系统(IPS: Intrusion Prevention System)是电脑网络安全设施，是对防病毒软件（Antivirus Programs）和防火墙(Packet Filter, Application Gateway)的补充。 入侵防御系统(Intrusion-prevention system)是一部能够监视网络或网络设备的网络资料传输行为的计算机网络安全设备，能够及时的中断、调整或隔离一些不正常或是具有伤害性的网络资料传输行为。

传统的入侵检测方法只能检测单步攻击，并产生由固定规则或智能检测触发的安全告警。定向网络攻击具有复杂多步的特性，往往会触发大量相关告警，这些碎片化的告警事件相互分散，混杂在大量的误报告警事件中，现有的检测方法不能有效地建立这些告警之间的关联性，无法构造出相对完整的定向网络攻击场景，安全事件关联分析和攻击场景重构一直是网络安全领域的热点问题。

随着高级持续威胁 (Advanced and Persistent Threat, APT)不断出现, 网络安全面临严峻挑战, 在此背景下, 以威胁情报驱动的新型网络安全防御机 制应运而生。ATT&CK是在大量已知 APT 攻击事件基础上构建出来的, 从战术和技术两个维度对 APT攻击进行总结归纳。战术是攻击的目的, 技术是实现战术所采取的具体方法, 在对技术的定义中, 包含了丰富的攻击上下文语义信息。

## 脚本
- 网络虽带来诸多便利，其存在的问题亦不可忽视，尤其是网络安全问题。个人信息泄露、网络诈骗、账号密码被盗、设备中病毒或木马等网络安全隐患，给网络安全防护工作带来极大挑战。我国是名副其实的网络大国，而非网络强国，网络安全相关工作起步晚。网络安全不仅涉及网民安全，也关系到国家安全，没有网络安全就没有国家安全。
- 9月5日，国家计算机病毒应急处理中心发布了“关于西北工业大学遭受美国国家安全局网络攻击的调查报告”。 这向公众详细揭开了，美国对我们网络攻击全过程。 这也是我首次看到，我们如此详细的披露，美国对我们网络攻击的方式，所使用的具体网络攻击武器名称、包括直接披露了具体是美国哪个部门发动了这样的网络攻击，甚至都定位到发动攻击的人数有多少。
	- 说明
	- 美国网络攻击过程(详细披露)
- 在当今时代我们更应该加强我们的网络安全建设。
- IDS 和 IPS 分别是什么
- 他们的区别和分工，都是用来做什么的？
- 攻击场景重构技术是什么？
- IDS IPS 和攻击场景重构技术对网络威胁检测的重要意义。
	- 应该就是讲场景重构技术能够做到什么事情，做到其他技术做不到的事情。

传统的入侵检测方法只能检测单步攻击，并产生由固定规则或智能检测触发的安全告警。定向网络攻击具有复杂多步的特性，往往会触发大量相关告警，这些碎片化的告警事件相互分散，混杂在大量的误报告警事件中，现有的检测方法不能有效地建立这些告警之间的关联性，无法构造出相对完整的定向网络攻击场景，安全事件关联分析和攻击场景重构一直是网络安全领域的热点问题。

- 3-5 页
# ATT&CK 威胁库结构和应用
- ATT CK 是什么(包括结构是什么样的)
- ATT CK 的意义，有哪些作用
- 存在问题，所以需要 ATT CK
- [聊聊网络攻击预测技术-51CTO.COM](https://www.51cto.com/article/707693.html)
- [十大ATT&CK攻击技战术-51CTO.COM](https://www.51cto.com/article/623700.html)
- [ATT&CK-立足攻防最前线，探索ATT&CK理论与实践 (qingteng.cn)](https://www.qingteng.cn/att-ck.html)
- 云安全也是值得注意的领域，我站起来都费劲。
- [基于ATT & CK技术矩阵，在工业控制系统安全防护的实践 - 行业资讯 - 新闻资讯 - 首页 (rongannetworks.com)](http://www.rongannetworks.com/article/detail/l/zh-cn/id/29/did/174.html)
- [ATT&CK威胁建模 - Black Front Security Team (iredteam.cn)](https://wiki.iredteam.cn/threat-modeling-phase/threat-modeling)
- [ATT&CK应用现状 - 安全内参 | 决策者的网络安全知识库 (secrss.com)](https://www.secrss.com/articles/34950)
- [ck+数据集_ATT CK驱动下安全运营数据分析的实用性挑战 - 豆奶特 (dounaite.com)](https://www.dounaite.com/article/62611386f86aba5c7881ff19.html)
- [直击RSAC 2022：巧用ATT & CK框架应对具体威胁 (360.net)](https://360.net/about/news/article62afe8508774d7005a02ad6e)

- [x] 结构
outline:
- [x] 分析 ATT&CK 每个战术及每个战术的意义
	- [x] 中间要有衔接的语言,进行呈上启下3-5
- [x] 分析一个技术的案例，解释技术介绍、缓解措施、**检测、工具以及平台**等(自己做)3-4
- [x] 介绍ATT&CK功能：威胁情报格式化、攻击场景重构、评估安全系统等。重点叙述基于ATT&CK场景重构的功能(自己做) 3-4
	- [x] 这部分有 4 个应用场景，但是需要自己总结概括。

- [如何用好ATT&CK - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/432213621)——如何应用 ATT&CK

## 脚本
### 第一部分
#### 侦察
侦察是攻击者试图收集他们可以用于实现攻击目标的信息的一种行为。

侦察包括攻击者主动或被动收集可用于支持目标定位的信息的技术。此类信息可能包括受害者组织、基础设施或工作人员的详细信息。攻击者可以将获取的信息用于其攻击周期的其他阶段，例如使用收集的信息来规划和执行初始访问，确定入侵后目标的范围并确定其优先级，或者推动进一步的侦察活动。

#### 资源开发
资源开发包括涉及对手创建、购买或破坏/窃取可用于支持定位的资源的技术。此类资源包括技术设施、帐户或者功能。攻击者可以将这些资源用于其攻击周期的其他阶段。

#### 初始访问
初始访问包括攻击者使用各种入口向量在网络中获得初始立足点的技术。用于获得立足点的技术包括有针对性的鱼叉式网络钓鱼和利用面向公众的Web服务器上的弱点获取立足点。通过初始访问获得的立足点可能允许持续访问，例如有效帐户和使用外部远程服务，%%或者可能由于更改密码而受到限制。%%

#### 执行
执行包括导致在本地或远程系统上运行对手控制的代码的技术。运行恶意代码的技术通常与其他策略中的技术配合，以实现更广泛的目标，例如探索网络或窃取数据。例如，攻击者可能使用远程访问工具执行远程系统发现的 PowerShell 脚本。

#### 持久化
持久化的目的是为了维持攻击者在系统中的立足点。持久化包括攻击者用来在被攻击者重启、更改凭据和其他可能切断其访问的中断时保持对系统的访问的技术。持久化的技术包括任何允许它们在系统上保持立足点的访问、操作或配置更改，例如替换或劫持合法代码或添加启动代码。

### 第二部分
#### 权限提升
权限升级包括攻击者用来在系统或网络上获得更高级别权限的技术。 攻击者通常可以通过非特权访问进入和探索网络，但需要提升权限才能进一步实现其目标。 常见的方法是利用系统弱点、错误配置和漏洞。

#### 防御逃逸
防御逃逸包括攻击者用来避免在整个妥协过程中被检测到的技术。 用于防御规避的技术包括卸载/禁用安全软件或混淆/加密数据和脚本。 攻击者还利用和滥用受信任的流程来隐藏和伪装他们的恶意软件。 当这些技术包括颠覆防御的额外好处时，此处交叉列出了其他战术的技术。

#### 凭据访问
凭据访问包括用于窃取帐户名和密码等凭据的技术。 用于获取凭据的技术包括键盘记录或凭据转储。使用合法凭证可以让攻击者访问系统，使其更难被发现，并提供创建更多帐户以帮助实现目标的机会。

### 第三部分
#### 发现
发现包括攻击者可能用来获取有关系统和内部网络的知识的技术。 这些技术帮助攻击者在决定如何行动之前观察环境并确定自己的方向。 它们还可以使攻击者能够探索他们可以控制的节点以及他们的切入点周围的节点，以便攻击者实现攻击目标。 

#### 横向移动
横向移动包括攻击者用来进入和控制网络上的远程系统的技术。 完成他们的主要目标通常需要探索网络以找到他们的目标并随后访问它。 实现他们的目标通常需要通过多个系统和帐户来获得收益。攻击者可能会安装他们自己的远程访问工具来完成横向移动，或者使用具有本地网络和操作系统工具的合法凭证，这可能更隐蔽。

#### 采集
收集包括攻击者可能用来收集信息的技术。通常，采集数据后的下一个目标是窃取数据。常见的目标源包括各种驱动器类型、浏览器、音频、视频和电子邮件。 常见的收集方法包括捕获屏幕截图和键盘输入等。

### 第四部分
#### 命令与控制
命令和控制包括攻击者可以用来与受害网络中受其控制的系统进行通信的技术。 攻击者通常会尝试模仿正常的、预期的流量来避免检测。根据受害者的网络结构和防御手段，攻击者可以通过多种方式构建具有不同隐身级别的命令和控制。

#### 数据渗漏
数据渗漏包括攻击者可能用来从目标网络窃取数据的技术。攻击者可以通过网络电话、电子邮件、网络打印机等实施。

#### 影响(Impact)
"影响"包括攻击者通过操纵业务和运营流程来破坏可用性或损害完整性的技术。用于“影响”的技术可能包括破坏或篡改数据。在某些情况下，业务流程可能看起来没有问题，但可能已被更改以实现攻击者的目标。攻击者可能会使用这些技术来实现其最终目标或为泄露机密性提供掩护。

### 分析一项技术
- 技术是更加具体的概念，可以通过多种方式实现，如 Privilege Escalation 下的 Abuse Elevation Control Mechanism, 可以通过下述四种方式实现，1、2 当然还有 ... 方式，如果有想要更深理解的朋友可以点击链接去了解哈。

##### 鱼叉式钓鱼附件(侦察)
鱼叉式钓鱼附件是鱼叉式钓鱼的一种特殊变体。叉式钓鱼附件不同于其他形式的鱼叉式钓鱼，它利用附加到电子邮件的恶意软件。 所有形式的鱼叉式钓鱼都是以电子方式提供的针对特定个人，公司或行业的社会工程。 在这种情况下，攻击者将文件附加到鱼叉式钓鱼电子邮件并通常依赖用户执行 (User Execution ) 来获得执行。 附件可以是 Microsoft Office 文档、可执行文件、pdf 或存档文件等。 在打开附件（并可能点击过去的保护）时，攻击者的有效载荷会利用漏洞或直接在用户系统上执行。 钓鱼式电子邮件的文本通常试图给出一个文件应被打开的合理理由，并可能说明这样做需要如何绕过系统保护。 电子邮件还可能包含有关如何解密附件（如 zip 文件密码）以避开电子邮件边界防御的说明。 攻击者经常操纵文件扩展名和图标，以便使附加的可执行文件显示为文档文件，或者使应用程序显示为文件的文件。

鱼叉式网络钓鱼（Spear phishing）指一种源于亚洲与东欧，只针对特定目标进行攻击的网络钓鱼攻击。当进行攻击的骇客锁定目标后，会以电子邮件的方式，假冒该公司或组织的名义寄发难以辨真伪之档案，诱使员工进一步登录其账号密码，使攻击者可以以此借机安装特洛伊木马或其他间谍软件，窃取机密；或于员工时常浏览之网页中置入病毒自动下载器，并持续更新受感染系统内之变种病毒，使使用者穷于应付。由于鱼叉式网络钓鱼锁定之对象并非一般个人，而是特定公司、组织之成员，故受窃之资讯已非一般网络钓鱼所窃取之个人资料，而是其他高度敏感性资料，如知识产权及商业机密。


##### 缓解
可以使用网络入侵防御系统和旨在扫描和删除恶意电子邮件附件的系统来拦截活动。 解决方案可以是基于签名和行为的，但是攻击者可能以某种方式构造附件来绕过这些机制。 拦截在默认情况下不应通过电子邮件进行传输的未知或未使用的附件，作为防止某些载体的最佳实践，例如。.scr,.exe, .pif, .cpl 等，一些电子邮件扫描设备可以打开并分析压缩和加密格式，如可能用来隐藏在混淆恶意附件文件或信息的 zip 和 rar。 这种技术涉及到在终端上与用户交互，因此难以完全缓解。 然而，也有潜在的缓解措施。 可以培训用户，使其能够识别社会工程技术和钓鱼邮件。 以使用应用程序白名单阻止下载附件的执行 杀毒软件还可以自动隔离可疑文件。

##### 检测
网络入侵检测系统和电子邮件网关可用于检测带有恶意附件的鱼叉式网络钓鱼。 引爆设计（detonation chambers）也可用于识别恶意附件。 解决方案可以是基于签名和行为的，但是攻击者可能以某种方式构造附件来避免这些机制。 杀毒软件在扫描存储在电子邮件服务器或用户计算机上的文件时，可能会检测到恶意文档和附件。 终端检测或网络检测可以在打开附件（例如 Microsoft Word 文档或 PDF 文件，可以连接到 internet 或生成 Powershell.exe) 时潜在地检测恶意事件，这些事件与客户端执行和脚本的漏洞利用等技术有关。

![[Pasted image 20220928202049.png]]
 Application log: 监控第三方应用程序日志记录、消息传递和/或其他可能发送网络钓鱼消息以访问受害系统的工件。 基于 DKIM+SPF 或标头分析的过滤有助于检测电子邮件发件人何时被欺骗。[4][5] 电子邮件中的 URL 检查（包括扩展缩短的链接）可以帮助检测导致已知恶意站点的链接。 引爆室可用于检测这些链接，并自动转到这些站点以确定它们是否具有潜在的恶意，或者在用户访问链接时等待并捕获内容。
- 翻译的工作可以先放一放哦

## Reference
- 文档(整合)
- ATT CK 中文版
- ATT CK 官网 
- [ATT&CK - VULHUB开源网络安全威胁库](http://vulhub.org.cn/attack)



- [ ] 今天要完成技术和战术的脚本 + 

# ATT&CK的应用
outline:
1. 基于 ATT CK 的网络威胁分析技术

- [x] 这部分直接基于整理的文档去写就好了哦。

## 脚本
ATT&CK 官方文档中提供了四个经典的 ATT&CK 使用案例：
- 威胁情报
- 检测和分析
- 对手模拟和红队
- 评估和工程
威胁情报的价值在于了解攻击者的行为，并用这些信息来改善决策。总体来说，ATT&CK对于那些希望在防御中提升威胁情报利用率的组织机构而言非常有意义。但是对于不同安全建设程度的企业机构来说，威胁情报的利用可以划分为以下三个级别。
- Level 1: 适合刚刚开始使用威胁情报、资源而且数据比较少的组织机构。
- Level 2: 适合中等成熟度的安全团队。
- Level 3: 适合拥有高级安全团队和资源的企业机构
接下来紧要介绍 ATT&CK 的 4 个经典的使用案例

## 威胁情报
网络威胁情报的价值就是可以用来知道攻击者正在做什么，并且可以利用这些情报信息来辅助决策。
- 处于Level 1阶段的组织机构，可能只有几个分析人员，对于他们而言，只需根据ATT&CK框架分析他们重点关注的几个APT组织机构活动即可。
- 当然如果企业组织有一个专业威胁分析团队，也就是处于Level 2阶段，则可以直接将攻击情况映射到ATT&CK框架中，而不仅仅是使用别人已经映射好的内容。威胁情报既可以来源于内部输出，也可以来源于外部渠道。
- 处于Level 3阶段的企业组织机构，往往拥有较为高级的安全分析团队，可以将更多的内部和外部信息都映射到ATT&CK，包括事件响应数据、威胁订阅报告、实时警报，以及组织的历史信息等。
综上所述，ATT&CK威胁情报的核心价值就是，让企业机构能够更加深入、系统地了解攻击者信息，并且能够按照轻重缓急来应对不同的攻击。

## 检测分析
基于ATT&CK框架进行检测分析，与传统检测方式有所不同，它并不是在识别已知的恶意行为后进行阻断，而是收集系统上的事件日志和事件数据，然后使用这些数据来识别这些行为是否是ATT&CK中所描述的可疑行为。
- 对于处于Level 1阶段的组织机构而言，使用ATT&CK进行检测分析的第一步，就是了解组织机构拥有哪些数据以及检索数据的能力。毕竟，要找到可疑的行为，需要能够看到系统上发生了什么。一种方法是查看每个ATT&CK技术列出的数据源。通过这些数据源信息可以知道，需要收集哪些类型的数据才能检测到相应的技术。
- Level 2级别的组织机构已经建立基本的安全分析团队，可以自己制定分析方案，扩大ATT&CK的技术覆盖范围。当然这需要了解攻击者是如何攻击的，以及与哪些数据源有关。例如，假设针对Regsvr32没有很好的检测方案。虽然ATT&CK已经列出了几种不同维度的检测方法，但是想要通过一份分析方案就能完全覆盖这几个不同维度显然是不现实的，而更应该专注于一个维度进行检测，避免了重复造轮子的情况。
- 攻击者会绕过防御，基于ATT&CK框架的检测分析策略也可能被绕过。对于Level 3级别的组织机构，防绕过的最佳办法就是直接进行红蓝对抗。蓝队负责构建检测分析，红队负责模拟攻击，并且根据真实技术和威胁情报执行攻击和绕过。


## 模拟攻击
模拟攻击是通过构建场景来测试攻击者战术、技术和步骤的一个过程。红队基于已知场景，测试目标网络上的防御系统是如何对抗攻击的。ATT&CK是一个真实攻击知识库，所以可以很容易地将红队与ATT&CK关联起来。当然不同成熟度的组织机构会有不同情况的场景。
- 对处于Level 1阶段的小公司团队而言，即便没有成熟、完整的红队，也可以从模拟攻击中获益。例如，公司可以利用开源项目Atomic Red Team来检测那些映射到ATT&CK框架中的攻击技术和步骤。Atomic Red Team可用于测试特定的技术和步骤，以验证行为分析和检测功能是否如预期的那样有效。
- 对于Level 3级别的成熟组织机构，则可以和CTI团队一起制定基于特定攻击者的模拟攻击计划。这样可以更好地进行防御绕过测试，以及了解数据源方面的能力缺失。推荐用如图5所示5个步骤流程来创建一个模拟攻击计划。


## 评估改进
评估改进这个场景建立在上述三个场景的基础上，主要为安全工程师和架构师提供有用数据，以证明基于威胁的安全改进是有效的。评估改进流程主要包括评估覆盖范围、确定差距的优先级排序和调整防御方案
- 处于Level 1阶段的组织机构，千万别设想一开始就能够做一个全面评估。相反应该从小处着手，选择一个具体的技术，确定该技术的覆盖范围，然后进行检测。如不确定选择哪个技术点，可以参考“威胁情报”场景内容。
- 处于Level 2阶段的组织机构，都会希望尽可能覆盖ATT&CK矩阵中所有技术。
- 对于那些拥有高级安全团队、处于Level 3级别的组织机构，评估改进时还需要考虑缓解措施。这有助于将评估从仅仅关注工具、分析及所检测到的内容，转移到关注整体安全状况。



## Reference
- 文档
- 你的负面情绪对你的工作不会有任何的
