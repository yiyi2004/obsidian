## 39

- 分布式系统，消息队列，传递更新缓存的信息
- TCC 强一致性方案

## 40

1. 缓存穿透：都不存在
	1. null + TTL
		1. 内存消耗
		2. 短暂不一致性
	2. 布隆过滤器 golang 布隆过滤器

## 41

动手实现

- 拦截器

![[Snipaste/Pasted image 20231003200455.png]]

- 限流的实现方案

## 42

缓存雪崩：大量的 key 同时失效

- 随机值 | 预导入、缓存预热 + 随机数

redis 宕机

- 哨兵机制 | 主从、数据同步、集群
- 添加降级限流策略 | 服务降级，牺牲某些服务 ---> Spring Cloud(微服务)
- 添加多级缓存

## 43

缓存击穿 | 热点 key 问题

- 互斥锁 | 互相等待

双重检验

- 逻辑过期 expire 过期时间，热点 key 活动的时候需要添加

![[Snipaste/Pasted image 20231003201529.png]]

- 双检验解决
- 互斥锁有死锁的风险

CAP 定理

## 44

redission

setnx 命令 | 再设置会失败  
setnx(设置锁, ttl), delete(释放锁)  
这里面的坑很多

模拟高并发：JMeter 压力测试
