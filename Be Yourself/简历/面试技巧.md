- 制造亮点
- 简历发给班主任

map、slice 的原理面试前背一背

- 准备简历
- 准备项目
- 话术模板
- 面试技巧
- 面试 checklist —— 项目的 checklist

百万 QPS —— 大厂的吹牛

## 简历

- **高并发**、**高可用**、大数据、k8s 的证书 —— 多少提高竞争力
- 新创

业务：相似性，和现在做的东西相似的、技术上的突破

性能优化 —— **积累性能优化的案例** —— **形成一个笔记**

![[Snipaste/Pasted image 20240123184909.png]]

- 99 没有高并发的能力
- **性能优化**
	- 业务相关的优化：比如 SQL 查询，没有查询
	- 引入缓存：
	- 数据库优化：乐观锁 select for update ---> CAS

缓存方面的内容，写法、双重缓存、缓存预热，实现，SQL 优化

精通 SQL 优化，**先让自己的简历通过**，准备 SQL 优化的案例。有方法论的优化和指导

SSD

MySQL 本身的优化，调 MySQL 的参数，redolog 的，高级的优化

- 精通 Linux 操作系统性能优化
- 数据库本身性能调优
- NoSQL 性能优化
	- ClickHost

DBA 做的优化

- 做了什么
- 产生了什么效果

go build -gcflags '-m'

- 分配到堆上 ---> 逃逸
- 分配到栈上 ---> 逃逸
- 尝试优化 —— 尝试修改

内存逃逸分析

- 内存逃逸 ---> 内存回收、内存分布
- 对象池
- 大厂里面有很多水货

**消息队列异步调用**

- 异步解耦
	- 创建订单，发邮件，异步的关系 —— 核心链路
	- 消息队列 kafka
	- 用户服务订阅消息队列
	- 自己解决
	- 别人的系统可以同时订阅的服务 —— 后续平台的接入
	- 自己代码不需要改变
	- 架构层面的优化 Kafka
- 推行读写分离 ---> 更高的要求是分库分表
- 现在 ES 比较流行，对比，数据迁移的问题，数据校验
	- ES 转 clickhouse
	- 引入 CDN OSS 处理静态资源 —— 图片
	- Nginx
	- 微服务网关
	- 讲清楚为什么引入
- 建议、推动读写分离：**同事做的，就是你做的**

性能优化

- 发现问题——监控告警、openteme、opentrace、prometheus、grafna
- 分析问题
	- 接口性能为什么差
	- sql
	- 缓存
	- 数据量大有问题
	- 没有用线程池、连接池的东西
	- 可以选择的方向
	- **足够多的细节**，水时间。特定时间内，摸底 45 分钟。
	- 取得的效果 —— 时间上 1s ---> 20ms 数字的，**可以编**

高并发

- 集群高并发不值一提
- 100 台机器，1000 万高并发
- **单机的高并发**——做了压测
	- 做了很多性能测试，实际上没有、但是做了压测。
	- 单台机器 200、集群 1000
	- 为了做到 200、做了哪些性能优化
	- 单机测试到很大的并发数就可以了
	- redis 10w QPS **wrk 压测**
	- 优化系统的性能

对象池能够明显降低内存回收的频率，环节 OOM 问题。

**硬件负载均衡**

读写分类，同步数据问题，支持读写分离的中间件，**gorm 的插件**，数据迁移比分库分表容易的多。

- 强调自己的单机高并发

性能优化 + 单机高并发

高可用

- 中间件的高可用 Redis Cluster —— 防止单节点故障造成风险。
- 有 推动的，没有——计划做的
- ES 集群模式的扩展

链路超时控制——重试——幂等。没有超时控制，会有什么问题——**goroutine 泄露**。

幂等机制，可用性得到了提升。

负载均衡 —— 偶发性的负载均衡不好 (轮询)，假设每个请求的资源是相同的，有些请求需要的资源非常多。都打到一个机器上了 —— 熔断限流降级

业务的核心路径 —— 做好熔断限流和降级。写 限流 读 降级

隔离，重要和不重要的 VIP。隔离 + 限流

JAVA 线程池隔离。

监控告警——可观测性：logging、tracing、metrics、prometheus

**以上是业务层面上的高可用——全链路的**

中间件层面的高可用

**容错**

- 编一个故障 —— 强调 Redis 的高可用 —— Cluster
- MySQL 主从
- 垂直切割，订单，用户 不同的 MySQL 实例 ——一个业务崩了，其他的不受影响。
- 自动的流量调度的机制，检测崩溃，流量调度。

其他关键字

![[Snipaste/Pasted image 20240124153415.png]]

- 分库分表 —— 分布式锁
- 精通分布式锁 —— **缓存里面的写一遍**
- **分布式的** 8.642

大厂的简历 —— 谦虚一点  
小厂的简历 —— 适当的夸张一点

可用性较高

![[Snipaste/Pasted image 20240124153920.png]]

- 重要的加粗 —— 比如三个地方
- **并发队列** —— 熟练掌握 Go 并发编程
- go 运行时
	- 内置类型原理
	- go 并发包原理
	- GMP 内存分配、内存回收
- mysql
	- 精通 innodb 引擎优化 MVCC、参数调优、SQL 执行流程
- 缓存
	- 缓存模式
- 中间件
	- 熟练掌握 + 高性能高可用方案 + 解决的问题
	- ES 会有什么问题呢
- 方法论 DDD
	- Builder 模式解决问题，不好面试
	- 设计模式
- 其他中间件：不是很熟悉的
- 其余技能
	- 前端技能
	- 云原生
- 开源
	- 开发 ORM 什么框架
	- 自研 WEB 框架、缓存框架
	- 知识星球
	- 有比没有好

## 准备项目

- 主导的核心项目 —— 对项目要很了解
- 我没做过分库分表 —— 其他项目、个人猜测、个人的决策。坦白的承认。
- 你有什么样的核心困难，我就有什么样的项目经历

Java 的选择会有更多

重要的在前面，不重要的在前面

不要临时组织语言，有备无患。  

可能的问道的问题 —— **自己总结一个回答的答案**

**资料汇总里面有的**

解决方案，困难对应解决方案

微创新

为什么用 Kafka 不用 RabbitMQ —— 决策不是你做的。优缺点、业务特征、综合业务特征。不是你做的，**但是你能说出所以然**。

不要一上来就说你的方案，**要有横向对比的方案**。为什么用 Redis

1. Cluster 不存在写平静问题、Zookeeper 有问题
2. 分布式事务 SAGA。
3. Redis 消息队列，持久化方案。

**已经做的 + 计划做的**
