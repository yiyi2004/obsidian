`go build -ldflags="-s -w -H=windowsgui"`  
`go build -ldflags="-s -w" `，但是这样就会有⿊窗⼝，后⾯会说如何解决⿊窗⼝的隐藏问题。

- upx 加壳
- shielden 加壳
- VMProtect 加壳  
garble 代码混淆

## 加密

- [异或xor加密](https://github.com/TideSec/GoBypassAV/tree/main/Encryption/XOR_code)
- AES
- Base64
- RC4
- B85
- 八卦加密
- 三重 DES
- RSA 加密
- ShellcodeUtils

## 资源修改

- 一般是利用工具进行修改

架构在某种程度上也是很有用的。

## 隐藏窗口

```go
package main

import "github.com/lxn/win"

func main(){
	win.ShowWindow(win.GetConsoleWindow(), win.SW_HIDE)
}
```

## 总结

1. API 的选择⽐较关键。
2. 选择合适的加密⽅式来处理 shellcode
3. 尽量⽣成 x64 的 shellcode，⽣成 x64 位程序
4. 编译时建议使⽤ go build -ldflags="-s -w" go build -ldflags="-s -w" ，也可以使⽤ garble
5. 加壳的话可以使⽤ upx，其他如果有更好的也可以使⽤ 6. 修改资源、加签名有⼀定效果 7. 好的反沙盒技巧还是很有效的
6. 隐藏窗⼝不要使⽤ -H=windowsgui -H=windowsgui 参数 9. 使⽤分配虚假内存等⽅式可绕过部分杀软
7. 采⽤正常功能进⾏混淆，可增强免杀效果，但⽂件可能变⼤很多
