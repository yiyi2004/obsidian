- 评论系统分析
	- 评论业务场景
	- 树形结构数据库设计
- 增删接口
	- 级联删除和外键
- 查询接口
	- 查看资源的评论
		- 缓存策略
		- 容错策略
	- 加载更多评论
		- 缓存策略
		- 容错策略

## 源码阅读

### Domain

```go
type Comment struct {  
    Id int64 `json:"id"`  
    // 评论者  
    Commentator User `json:"user"`  
    // 评论对象  
    // 数据里面  
    Biz   string `json:"biz"`  
    BizID int64  `json:"bizid"`  
    // 评论对象  
    Content string `json:"content"`  
    // 根评论  
    RootComment *Comment `json:"rootComment"`  
    // 父评论  
    ParentComment *Comment  `json:"parentComment"`  
    Children      []Comment `json:"children"`  
    CTime         time.Time `json:"ctime"`  
    UTime         time.Time `json:"utime"`  
}  
  
type User struct {  
    ID   int64  `json:"id"`  
    Name string `json:"name"`  
}
```

- 评论的降级措施，放在 gin.Context 里面
- 外键用于级联删除
- 找到评论，id 升序，因为 id 是聚簇索引
- 普通的需求，很容易实现
