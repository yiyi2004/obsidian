- Time：2023-06-24 19:27
- Label： #设计模式 #go

## Abstract

**适配器模式**（Adapter Pattern）是作为两个不兼容的接口之间的桥梁。这种类型的设计模式属于结构型模式，它结合了两个独立接口的功能。

## Content

这种模式涉及到一个单一的类，该类负责加入独立的或不兼容的接口功能。举个真实的例子，读卡器是作为内存卡和笔记本之间的适配器。您将内存卡插入读卡器，再将读卡器插入笔记本，这样就可以通过笔记本来读取内存卡。

```go
package adapter
// Target 是适配的目标接口
type Target interface {
	Request() string
}
// Adaptee 是被适配的目标接口
type Adaptee interface {
	SpecificRequest() string
}
// NewAdaptee 是被适配接口的工厂函数
func NewAdaptee() Adaptee {
	return &adapteeImpl{}
}
// AdapteeImpl 是被适配的目标类
type adapteeImpl struct{}
// SpecificRequest 是目标类的一个方法
func (*adapteeImpl) SpecificRequest() string {
	return "adaptee method"
}
// NewAdapter 是Adapter的工厂函数
func NewAdapter(adaptee Adaptee) Target {
	return &adapter{
		Adaptee: adaptee,
	}
}
// Adapter 是转换Adaptee为Target接口的适配器
type adapter struct {
	Adaptee
}
// Request 实现Target接口
func (a *adapter) Request() string {
	return a.SpecificRequest()
}
```

test for adapter

```go
package adapter
import "testing"
var expect = "adaptee method"
func TestAdapter(t *testing.T) {
	adaptee := NewAdaptee()
	target := NewAdapter(adaptee)
	res := target.Request()
	if res != expect {
		t.Fatalf("expect: %s, actual: %s", expect, res)
	}
}
```

## Reference
