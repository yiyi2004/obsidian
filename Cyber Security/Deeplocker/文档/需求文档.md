## 概述

1. 需求概述：说明为什么设计这个软件，包含多少模块 | 得和老师商量一下内容
2. 一张模块的划分图 | 用 visio 画出来
3. 系统功能描述表 | 整合各个部分
4. 各个系统功能包含的子功能
	1. 子功能的输入、处理过程和输出
	2. 接口标识和接口图
5. 内部接口描述
6. 剩下的乱七八糟的随便添添就好了

## 恶意软件生成的信息管理模块

- 数据库的增删改查

## 恶意软件生成模块

### 载荷的激活模式

载荷的激活模式有两种，分别是标准模式和严格模式。标准模式代表或的逻辑，即多个触发条件中有一个条件满足就会释放载荷，如当⼈脸信息匹配或者捕获的⾳频信息匹配时都会释放载荷，⽣成时可以缺少某⼀模型。严格模式代表“与”的逻辑，⽣成时不可缺少模型，当所有触发条件均满足时才会释放载荷，如当⼈脸信息和捕获的⾳频信息均匹配时释放载荷。

### 依赖生成和加载模块

这里可以画一张概要设计图，应该时流程图。

- 静态依赖的加载
	- Windows 下的静态依赖包括 tensorflow.dll 用于加载模型时调用。
	- Android 下的静态依赖
- 深度学习模型的获取
	- 人脸识别模型
	- 声音识别模型
- 载荷获取
- 目标密钥信息获取
- 载荷加密
- 激活配置文件生成

本项目基于功性能指标和研究需求进行功能设计，包括训练模块、恶意软件生成的信息管理模块、恶意软件生成模块和激活模块四个功能模块。如下图所示：

![[Snipaste/Pasted image 20230902092234.png]]

Deeplocker 演示验证圆形系统各功能需求描述如下表

模型训练模块提供了人脸识别模型训练功能、声音识别模型训练功能、场景识别训练功能以及情绪训练识别模型。同时提供了模型管理相关功能。| 接下来是各种模型的介绍和各个功能的介绍，对于模型的管理功能包括目标信息上传功能、目标信息删除功能、模型训练功能、训练过程中统计信息获取功能和模型下载功能。

恶意软件生成的信息管理模块设计的目的是为了生成模块提供服务，包括配置模块、模型管理模块、载荷管理模块和密钥管理功模块四个子模块。配置功能提供 Deeplocker 软件的基础配置功能，包括模型训练服务器的 IP 和端口以及生成的恶意软件的输出位置。

生成模块设计的目的是提供恶意软件生成的功能，它包含了载荷激活模式选择模块、依赖生成和加载模块和恶意软件生成模块三个子模块。载荷激活模式选择模块

激活模块包含载荷激活的逻辑，包含数据采集、预处理和识别模块、密钥生成模块、解密模块和激活模块四个子模块。

功能 1：载荷激活模式的选择

- 输入：载荷的激活模式
- 处理过程：在 Windows 下根据载荷的激活模式选择不同的模板，激活模式包含标准模式和严格模式，Android 下处理流程与 Windows 下类似。
- 输出：获取不同模式下的激活模板

功能 2：依赖生成和记载

- 输入：是操作系统类型、选择模型的版本信息、载荷选择信息和目标信息等
- 处理过程：根据输入的操作系统加载不同的静态依赖，根据选择模型的版本信息到服务器上下载对应的深度学习模型，根据模型信息和目标信息得到对应的目标的密钥，然后使用该密钥对获取的载荷进行加密，同时生成载荷激活的配置文件，在 Windows 下该配置文件会被内置到生成的动态加载库中。
- 输出：静态依赖、加密后的载荷以及载荷激活所需的配置文件

功能 3：编译生成动态加载库

- 输入：载荷激活所需的配置文件  
- 处理过程：利用 Go 提供的编译工具对功能 1 中得到的激活模板结合功能 2 中生成的载荷激活的配置文件进行静态编译和连接，最终生成一个名为 deeplocker.h 的头文件和一个名为 deeplocker.dll 的动态加载库，用于最终生成恶意软件。  
- 输出：头文件 deeplocker.h 和动态加载库 deeplocker.dll

功能 4：绑定 APP  

- 输入：tensorflow.h、tensorflow.dll 以及 config.json  
- 处理过程：在 Windows 下… 在 Android 下 … 输出：在 Windows 下… 在 Android 下…
- 输出：恶意软件

## 激活模块 (Windows & Android)

- 数据采集、预处理和识别模块
	- 人脸数据采集、预处理和识别模块
	- 声音数据采集、预处理和识别模块
- 密钥生成模块
	- 人脸密钥生成模块
	- 声音密钥生成模块
- 解密模块
	- 基于人脸密钥的载荷解密模块
	- 基于声音密钥的载荷解密模块
- 激活模块
	- Windows
	- Android

### 数据采集、预处理和识别模块

功能 1：人脸数据采集、预处理和识别模块  

- 输入：摄像头捕获的人脸图像
- 处理过程：摄像头捕获人脸图像之后，会利用 MTCNN 对图像进行预处理得到预处理之后的图像，然后将图像输入人脸识别模型，得到特征。
- 输出：人脸识别模型输出的人脸特征

功能 2：声音数据采集、预处理和识别模块

- 输入：麦克风捕获的声音信息
- 处理过程：麦克风捕获目标声音信息 之后，会对音频信息进行预处理得到预处理之后的音频，然后将声音信息输入声音识别模型，得到特征。
- 输出：声音识别模型输出的声音特征

### 密钥生成模块

功能 3：人脸密钥生成模块

- 输入：人脸识别模型输出的人脸特征
- 处理过程：将人脸特征输入到鲁棒性密钥生成模型
- 输出：人脸图像对应的鲁棒性密钥

功能 4：声音密钥生成模块

- 输入：声音识别模型输出的声音特征
- 处理过程：将声音特征输入到鲁棒性密钥生成模型
- 输出：声音信息对应的鲁棒性密钥

### 解密模块

功能 5：基于人脸密钥的载荷解密模块

- 输入：人脸图像对应的鲁棒性密钥
- 处理过程：尝试用生成的鲁棒性密钥尝试解密加密后的载荷
- 输出：尝试解密后的载荷

功能 6：基于声音密钥的载荷解密模块

- 输入：声音信息对应的鲁棒性密钥
- 处理过程：尝试用生成的鲁棒性密钥尝试解密加密后的载荷
- 输出：尝试解密后的载荷

功能 7：基于人脸密钥和声音密钥的载荷解密模块

- 输入：人脸图像对应的鲁棒性密钥和声音信息对应的鲁棒性密钥
- 处理过程：将两个密钥合并，并用其尝试解密加密后的载荷
- 输出：尝试解密后的载荷

### 载荷激活模块

功能 8：载荷激活模块

- 输入：尝试解密后的载荷
- 处理过程：会对解密后的载荷进行哈希处理，将得到的哈希值与原始载荷的哈希值进行对比，如果对比成功则释放载荷，如果不成功则会继续采集目标信息。
- 输出：无输出
