- 微信扫码登录基本原理
	- Oauth2 原理
	- 微信扫码登录流程分析
	- 微信登录 API 详解
	- 设计与实现
		- state 用法
- 长短 token
	- 长短 token 基本机制
	- 使用 JWT 实现长短 token
- 退出登录
	- JWT 退出登录
	- 重构已有的 JWT 代码
- 接入配置模块
	- 配置的优先级
	- 本地文件配置与 viper 入门
	- 远程配置
- 接入日志模块
	- zap 框架入门
	- 在 webook 中埋点

---

- state 没有弄明白是用来干嘛的
- 面试题
- 长短 token
- viper 配置中心

实现长短 token 机制

- 引入日志模块，提高软件的可观测性。

## 微信扫码登录基本原理

1. 点击微信登录，跳转到微信页面？问题是跳转过去的 URL 是什么。
2. 微信少吗登录，确认登录。
3. 微信跳转回来。问题是：跳转回来的 URL 是什么？

微信扫码登录其实就是一个 OAuth2 授权过程。

![[Snipaste/Pasted image 20240313215204.png]]

我回去写了一下，使用 Golang 是可以的。笔试真的那么重要嘛？

跳转过去的微信 URL

![[Snipaste/Pasted image 20240313222144.png]]

1. appid
2. rediect_uri
3. response+type
4. scope
5. state 随机数

![[Snipaste/Pasted image 20240313222240.png]]

1. 返回的 code ---> 发起调用 ---> access_token 
	1. 传入 appid + secret
2. 微信开放平台提交应用审核通过后
3. secret 应用密钥 AppSecret 审核通过后
4. code
5. grant_type


![[Snipaste/Pasted image 20240313222502.png]]

- 流程要点总结
	- 点击微信登录，跳转到微信页面
	- 微信扫码登录，确认登录，微信跳转回来